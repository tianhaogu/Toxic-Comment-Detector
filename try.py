import requests
import os
import json
import tweepy
import configparser

#  TODO: Currently waiting for elevated access of Twitter API to be approved, and only write some sketch (eg. only one example user)
#        to test the current functionality. Next need to consider more targeted users and think about how to connect with DynamoDB (eg. for ID Deduplication)
#        Then, need to auto-crawl (eg. use while True?) and consider crawling limits.

# def get_api():
#     config = configparser.ConfigParser()
#     config.read('config.ini')

#     api_key = config['twitter']['api_key']
#     api_key_secret = config['twitter']['api_key_secret']
#     access_token = config['twitter']['access_token']
#     access_token_secret = config['twitter']['access_token_secret']

#     auth = tweepy.OAuthHandler(api_key, api_key_secret)
#     auth.set_access_token(access_token, access_token_secret)
#     api = tweepy.API(auth, wait_on_rate_limit=True)
#     return api

# def get_replies(screen_name, tweet, curr_tweet_replies):
#     '''Use recursion to get all replies of the original tweet, and all nested replies of each reply'''
#     number_of_replies = 50
#     tweet_replies = tweepy.Cursor(
#         api.search, q='to:' + screen_name, since_id=tweet.id, tweet_mode="extended", lang='en'
#     ).items(number_of_replies)
#     for reply_tweet in tweet_replies:
#         if hasattr(tweet, 'in_reply_to_status_id_str'):
#             if (reply_tweet.in_reply_to_status_id_str == tweet.id_str):
#                 curr_tweet_replies.append(reply_tweet.text)
#                 try:
#                     reply_tweet_user_name = reply_tweet.user.screen_name
#                     for reply_to_reply in get_replies(reply_tweet_user_name, reply_tweet, curr_tweet_replies):
#                         pass
#                 except Exception:
#                     pass
#     return curr_tweet_replies

# def get_tweets(api, screen_name):
#     all_tweets_replies = []
#     number_of_tweets = 200
#     user_tweets = tweepy.Cursor(
#         api.user_timeline, screen_name=screen_name, tweet_mode="extended"
#     ).items(number_of_tweets)
#     for tweet in user_tweets:
#         curr_tweet_replies = []
#         all_tweets_replies.append(get_replies(screen_name, tweet, curr_tweet_replies))
#     return all_tweets_replies


if __name__ == "__main__":
    mylst = ['Strong black woman scare you. Sting black women inspire young girls. Who do you inspire, Mike?? https://t.co/Gb7SHLRIDg', 'Nobody cares about Mike Pompeo‚Äôs opinion any more. Somebody really needs to let Mike know.', "Said the party who confirmed justice Kavanaugh! We all know the REAL reason most of the GOP voted against judge Jackson's confirmation.", 'The mayor of D.C. and Nancy Pelosi are in charge,‚Äù Trump said of the Jan. 6, 2021, riot to the Washington Post. So now Trump is saying that Pelosi had more power than him at the time? Interesting...', 'You‚Äôre a sorry excuse for a human, Mike. You sold out your country and democracy for a grasp at power and you failed.', 'Well said', 'How can anyone today say how it is written? No one knows the intent of the writer. We have fashioned our interpretations how we see fit. Example is the 2nd amendment. Soon rocket propelled grenades will be acceptable. Get off it Mike.', 
    'There may be a overwhelming need 2 rewrite US constitution like that of France 2 avert completely future possibilities of radical libtards playing havoc with future of US democracy, overtaking control through rampant Muslim pandering, Chinese appeasers n destabilise global order', 'Rot of obsession with establishing n protecting Global Liberal order weirdly based nt on absurd global US dominance bt need fr ultimate destruction of Western democracies n in particular US Democracy through utter Muslim pandering even as per Robert Spencer of DailyJihad Watch', "No cares what you think we are just happy you're gone.", 'How come no one of these great Jurist ever speak of John Marshall', 'Fortunately you had no say so in the matter üò∂', 'I don‚Äôt care how much weight you lost - you will never be President.', 'Say goodbye to your rights ladies. Hang on to your muskets gentlemen. #ConstitutionWins', 'Never trade with dictatorship Don‚Äôt let Russia and China dictatorship destroy our world Let‚Äôs fight against dictatorship Fight for freedom #StandWithUkraine #DefendUkraine #PutinWarCrimes', 'You forgot to mention how much god inspires you. JS. ü§∑ü§∑\u200d‚ôÄÔ∏èü§∑\u200d‚ôÇÔ∏è', 
    "That's what President Biden &amp; the Democratic Congress has been doing since January 20, 2021.", 'Mike I read some of the terrible responses to your twitter. Don‚Äôt worry about any of them, they are probably not very high on intelligence chart. Carry on.', 'That is so far from the truth.', 'You are a true Patriot. Our country needs you. I appreciate your service.', 'You will not be President.', 'Thank you for your steadfast belief in America, the country that has made the world better, more than any other, since its founding, through the spread of democracy, freedom, creativity, innovation, and inclusion. Keep up the great work! Hope you run for POTUS.', 'Please don‚Äôt give up, we need more leaders like you to survive this Biden term. Now more than ever.', 'I don‚Äôt think you can count on the Biden administration for much of anything except more people crossing our borders. Why didn‚Äôt Trump fix immigration policy?', 'We are counting on leadership like you or we are doomed.']
    # '@POTUS All it took was $7t in debt and record inflation', '@POTUS Good question ü§£ü§£ü§£ü§£üá±üá∑üá±üá∑üá±üá∑üá±üá∑', "@POTUS - - - Growing Paychecks? - - - Secretary Pete c        ould do that immediately. But the ATA owns Congress, so he doesn't do what he's supposed to do. It's all rigged for the wealthy. https://t.co/NGHNpBFlU5", "@SpeakerPelosi @POTUS I am retired from wholesale electrical industry. I am familiar with logistics. I see many good LTL lines looking for drivers. Are you referring to independent drivers? I'm willing to send Pete a letter or two.)", '@POTUS Lower costs? Gas increased over 200%. Food is up over 20%, all other retail prices have increased significantly. You reneged on the minimum wage to pull over 40% of workers out of abject poverty. Everything you say you are doing is actually the reverse that is happening. Pariahs.', '@POTUS lowering cost of what your lawn maintenance. Gas up cost to buy a car has gone up food way up. This looks like 1979 all over again. Too Bad Reagan cant run.', "@POTUS Speaker what NEW Created Jobs at what NEW Formed Companies in USA ? Please be more specific since You are not telling the True Facts !!! Joe's companies Hired these ? Your Husband hire all these people - where are the Companies located at ? Have Drew your spokes tell all", '@POTUS Really? He CREATED jobs? guess you forget an entire country left their job due to a pandemic. MANY businesses closing FOR GOOD. 4.5 MIL in Nov, 4.3 in Dec, 69 MILLION IN 2021 QUIT! So we only need a note 61 MILLION JOBS! Numbers don‚Äôt lie, people do! https://t.co/b6whVACpNS', '@POTUS Those jobs would have been created a year earlier if we had simply ReOpened. Your administration created Inflation that is choking Recovery. You insisted on $Ts in "Subsidies" that DELAYED ReOpening. Then you blew Afghanistan. Now Ukraine. TERRIBLE assessments. &amp; CramDown Judge. https://t.co/hRSY5PjOxj', "@POTUS The Al-Amiriya Shelter massacre in Iraq is one of America's greatest crimes against the Iraqi people. The US military killed dozens of civilians, including children and women, with targeted shelling in an Iraqi shelter. #America is the mother of terrorism https://t.co/7PqDAdPZlk", '@POTUS What stocks should I buy?', "@SpeakerPelosi @POTUS I'm sure there's a website somewhere that tells you what stocks they buy. But I'm assuming that was rhetorical question.", '@POTUS You had smelling salts for breakfast https://t.co/54RwocRxnF', '@POTUS Interesting 7.9 same rate for inflation 7.9% almost biblical!!! Scary!!!! Everything is lining up for a severe recession', '@POTUS Traitor! Where is manual? How to control the vote machine ü§óü§óü§ó', '@POTUS How is your portfolio looking?', "@POTUS Meanwhile Republicans are more concerned with stopping people from talking about LGBT people, making sure you can marry children and banning books and women's reproduction rights.", "@POTUS Shouldn't you be in quarantine?", '@POTUS Now cancel student debt!', "@SpeakerPelosi @POTUS Why should we pay for someone's debt....they chose to go to college. I cannot ba k that. I paid for college. My kids have paid for theirs. You want to get rid of someone's debt...cover cancer patients. College is a choice...Cancer is NOT!", 
    # '@POTUS Get well Madam Speaker. üëãüáøüá¶', "@POTUS Reopening the economy isn't the same as creating.",   '@POTUS Go now Brandoms, let Maga return!', '@SpeakerPelosi @POTUS Absolutely not! https://t.co/20T7cacVyn', '@SpeakerPelosi @POTUS Coming soon! https://t.co/KzN9HK375C', '@SpeakerPelosi @POTUS Yes, to a prison near you!', '@POTUS We need about 2M barrels of domestic production, it would lower inflation by a third and we will require less federal rate hikes slowing our economy. Please meet with oil executives and learn how to make it happen.', '@SpeakerPelosi @POTUS What specific government policies are holding oil companies back from producing oil to meet demand?', '@SpeakerPelosi @POTUS I‚Äôm not sure, it may not be the governments fault, but they certainly aren‚Äôt helping. It may be a good idea for government intervention to incentivize additional production, perhaps immediate expensing of capital investments for additional production.', '@mdowstfl @SpeakerPelosi @POTUS Opec is trying to recoup losses from when covid had everything closed down and people were not buying gas', '@SophiaLee42 @SpeakerPelosi @POTUS Most producers don‚Äôt want to produce more, and 2M additional barrels would reduce prices of oil 40%, we should incentivize domestic production by stimulating about 300B in capital expenditures to increase production. Would reduce inflation by a third.', '@bigcxc @SophiaLee42 @SpeakerPelosi @POTUS Murderous greed is the problem here. https://t.co/qtZYSJfL9e', '@bigcxc @SophiaLee42 @SpeakerPelosi @POTUS Pretty much all large producers are facing the same reality and do not want to increase production, government intervention could incentivize more production, or maybe a domestic oil SOE is needed.', '@POTUS Lowering costs of what? Everything is at record highs‚Ä¶ #failure üôÑ', '@POTUS ü§°ü§°ü§°ü§°ü§°ü§° Why did you bow to China?', '@POTUS You have your mask on? Might as wellnget another booster!', '@POTUS Its time to you to go home. https://t.co/4niEF39HTs', '@POTUS Get back into action soon Speaker! Stay well', '@POTUS what about student loan forgiveness', '@SpeakerPelosi @POTUS If enough people downvote and report this bot account then maybe twitter will pull it down.', '@SpeakerPelosi @POTUS According to liberal democrats the economy is awesome, unemployment rate is lowest ever and wages are rising. Seems to me with all that good news you should be able to take that degree and use it to earn an income so you can pay off your loan, you know, like the rest of us do.', '@SpeakerPelosi @POTUS What about mortgage forgiveness?', '@SpeakerPelosi @POTUS Did someone force you to major in liberal arts at a 4 year school ?', '@SpeakerPelosi @POTUS Why should someone else pay for your financial choices?', 'How about this b https://t.co/Pn4qCTJ8TE', 'After seeing the woman‚Äôs health bill you endorsed and signed. You care nothing about humans.', 'The raping of a President: Pelosi &amp; DC Mayor Muriel Bowser were responsible but not held accountable because they are privilidged girls - but they will always be promoted &amp; not Drafted because they are privileged girls &amp; the men were prosecuted https://t.co/6wHPzDUAXM', 'Rooting for covid. Let this evil wrinkled crap be gone!', 
    # 'How are you not being investigated for insider trading. Tesla etc. Walking conflict of interest', 'What the U.S. congress has done to the American People by allowing social media companies to have impunity is a grave injustice and every single one of you has made a mockery of &amp; destroyed the U.S. Constitution &amp; all those who fought &amp; died to defend Democracy &amp; freedom for all', 'Stop spending our money.', 'What the U.S. congress has done to the American People by allowing social media companies to have impunity is a grave injustice and every single one of you has made a mockery of &amp; destroyed the U.S. Constitution &amp; all those who fought &amp; died to defend Democracy &amp; freedom for all.', 'Pelosi &amp; DC Mayor Muriel Bowser were responsible but not held accountable because they are privilidged girls - but they will always be promoted &amp; not Drafted because they are privileged girls &amp; the men were prosecuted https://t.co/6wHPzDV8Nk', 'What the U.S. congress has done to the American People by allowing social media companies to have impunity is a grave injustice and made a mockery of the U.S. Constitution and all those you fought to defend Democracy and freedom for all.', "So you'll not do anything to raise the wages of the working class, but you'll give a hundred billion to rich people that own automated plants? Sounds about right for neoliberal policy.", "The U.S. is not a democracy or a free country, because the government has given itself immunity from infringing on people's constitutional rights by giving imunity to social media companies that the government uses to abuse citizens Constitutiinal Rights and Freedoms!", '#TWITTER IS A GOVERNMENT ENTITY!', 'Say the government approached me, offers my business immunity as they need to use my technology to subvert the U.S. Constitution.Citizens are harmed but have limited recourse due to Government immunity. Is Twitter a Business or Government entity infringing on the constitution?', "It all sounds great but we, on the ground, need help. We're being crushed!", 'Thanks.', 'Say the government approached me, offer my business immunity as they need to use my technology to subvert the U.S. Constitution.Citizens are harmed but have limited recourse because of Government immunity. Is Twitter a Business or Government entity infringing on the constitution?', '4th Stimulus checks!!! To all American people!!!', "We know the top minds in American corporations don't want extreme right wing Republicans running the country. Run on that", 'The Democratic Alliance should first recover the entire territory of Ukraine, then let Putin step down and build a new pro-Western Russian government, then completely isolate CCP to let the Marxist-Leninist communism disappear from the world, then a world peace can be achieved!', "Madam honestly it's like you took Trump's idea and branded it as Bidens. This makes no sense. As long as it benefits your party that's all that matters. What about the American people that you work for? Put American needs first and quit shipping tax dollars on worthless causes.", 'Sound great. May I ask what you are doing to end slavery in the United States?', "your grandmother's leg", 
    # "Now it's time to cancel student loan debt, if you can send billions to Ukraine, I understand, then cancel your people here debts we can't pay.", 'Please go to china', "All of you have already messed that up by shutting down our gas and oil lines. Then try to blame the Oil companies. Yes there are leases, but you don't mention you are tying their hands by not releasing permits or the rediculous constraints you put on them. FAILURE.!", 'Wishing you a speedy recovery.', 'new puppet installation completed', '@BobbieCavazos76 Not for all the MAGA racists‚Ä¶but I‚Äôm overjoyed', 'Hope you get well soon', 'Yes identity politics wins again !', "Yes to 'Law and Order'.... Strength + Wisdom, to one of the Greatest Nations. Blessings", 'How do you know she‚Äôs a woman? You‚Äôre not a biologist. You‚Äôre just a career politician. And a rich one at that.', 'How the VAX working Nancy', 'And Joe Biden is making it all about himself and race.', 'Absolutely Nancy! It is a day to remember in history. This is putting the right pegs in the appropriate holes! She will handle that position in all ramifications!', "Hello Madame Speaker hope you'll speak with Roland Martin in 2022 ? Be safe.", "You're a one ugly b**** for the American people You should be f****** Murphy Murphy because hes just as ugly as you are with your f****** horse teeth Hope all you democrats rotten h*** For being so f****** ugly to the American people", 'Congrats Judge Jackson you certainly deserve this honor!', 'Sorry to hear you tested positive. An extra prayer being sent. The Democrats are not fighting hard against the GOP but as much as I hate to say this you must start calling them out even if you fight like them. I live in Florida and the thought of Ron as Pres is unacceptable', 'How is GITMO', 'It‚Äôs beginning to look a lot like the United Front everywhere you go. Oh btw Abbott has some friends of yours he‚Äôs bringing to D.C. https://t.co/bXyLPZnsVG', 'I WOULD GIVE ANYTHING IF YOUR ASSISTANT WOULD COME FORWARD AND REVEAL ALL YOUR DIRTY SECRETS!', 'Woman? So she\'s a "woman", now ya know', 'Like anyone cares', 'I WOULD BE OFFENDED IF I WERE JUDGE . SHE WAS SOLELY CHOSEN BECAUSE SHE IS BLACK. BIDEN HAD PROMISED TO PLACE A BLACK FEMALE JUDGE ON THE PANEL PRIOR TO THE RIGGED ELECTION.', '@SpeakerPelosi YOU CANT SAY WOMAN!!! KBJ DOESNT EVEN KNOW WHAT ONE IS. SO ILL FIX IT FOR YOU. "KBJ IS THE 2ND BLACK SUPREME COURT JUSTICE". There, now its politically correct and inline with your WOKE standards.', '@POTUS Thank you very much for your support!', '@POTUS How are you not being investigated for insider trading. Tesla etc. Walking conflict of interest', '@POTUS Pelosi &amp; DC Mayor Muriel Bowser were responsible but not held accountable because they are privilidged girls - but they will always be promoted &amp; not Drafted because they are privileged girls &amp; the men were prosecuted https://t.co/6wHPzDUAXM', '@POTUS Appreciation from Ukraine \U0001fac2', '@POTUS ‚òÖJeremiah Habakkuk Judgment on USA: Diaspora/ Red Dawn/Famine/Pestilence/Sword/Black Horse‚òÖ ‚òÖCIA &amp; Satanism/Baal Reaps U.S.America Babylon‚òÖ ‚òÖGalatians 6:7 Perfect Blessing Passes to BRICS‚òÖ ‚òÖMENE, MENE, TEKEL, UPHARSIN‚òÖ https://t.co/0zKU5VEejb https://t.co/quNSmLEKlb', 
    # '@POTUS Thank you!', "@POTUS But you guys went on recess without touching Lend-Lease! Why? This can't afford a 2 week delay. Recess should have been put off, there are more important things going on right now.", '@POTUS üëè Thank you, üá∫üá∏, for your help! The only morally right strategy f  or the world now is: stronger sanctions on üá∑üá∫, more weapons to üá∫üá¶, FULL #EmbargoRussianOilandGas! Leadership &amp    ; brave steps of support, everything you can do to #BanRussia #StopPutin &amp; #StopTheWar üôè', 'Great! I hold CONgress beneath contempt', 'When are you going to stop withholding information? Release the video tapes.', 'Now Garland needs to do his job.', 'Thank you for always working so hard for us and feel better soon, we need you!', 'Get well soon. Take care of yourself.', 'Pelosi &amp; DC Mayor Muriel Bowser were responsible but not held accountable because they are privilidged girls - but they will always be promoted &amp; not Drafted because they are privileged girls &amp; the men were prosecuted https://t.co/6wHPzDUAXM', 'Hopefully you don‚Äôt die from COVID üôÑ', 'Nancy you be reusing your pictures üòÇ', 'Great! Now how about they vote to hold YOU in contempt for refusing to release your documents pertaining to January 6, Madam Speaker.', 'Hunter Bidens laptop and the corruption that is happening within this administration needs to be investigated.', "Signora don't waste time in silly issues,you have many more to take care and that need solutions", 'You have never fulfilled your duty to the constitution you fulfilled for Nancy Pelosi to become a millionaire', 'Very doubtful that‚Äôs what you‚Äôre doing.', 'I believe January 6 was a set up.', 'Who are they?', "NANCY PELOSI YOU KNOW NOTHING ABOUT ARE CONSTITUTION PLEASE STOP ACTING LIKE YOU DO ONE DAY YOU NANCY PELOSI WILL PAY FOR YOUR PART IN CREATING JANUARY 6. LET'S GO BRANDON", "Democrats always looking in the wrong place when she has all the answers let's check your emails and cell phone records along with many other Democrats", '@POTUS This looks a like a picture of a nursing home my grandma used to live in - now I see why US is screwed', '@POTUS Pelosi &amp; DC Mayor Muriel Bowser were responsible but not held accountable because they are privilidged girls - but they will always be promoted &amp; not Drafted because they are privileged girls &amp; the men were prosecuted https://t.co/6wHPzDUAXM', '@POTUS You have Covid! You shouldn‚Äôt even be there! You should be isolating at home. And no masks anywhere!!! Just not smart! üò≥üò≥üôÑüôÑ', "@POTUS Right. And now I get to pay for it. Youre right Nancy I'm so lucky tool be working you and for the government, my savior NOT #retirenancy", '@POTUS @BarackObama Pelosi &amp; DC Mayor Muriel Bowser were responsible but not held accountable because they are privilidged girls - but they will always be promoted &amp; not Drafted because they are privileged girls &amp; the men were prosecuted https://t.co/6wHPzDUAXM']
    print(len(mylst))
    # api = get_api()
    # screen_name = "william_tianhao"
    # all_tweets_replies = get_tweets(api, screen_name)
    # for curr_tweet_replies in all_tweets_replies:
    #     print(curr_tweet_replies)
    #     print('\n')

    # statuses = api.user_timeline(screen_name=screen_name, exclude_replies=True) 
    # for status in statuses:
    #     print(status.text, end = "\n")
    #     print('\n')
    # for tweet in tweepy.Cursor(api.search_tweets, q='to:' + screen_name, tweet_mode="extended", result_type='recent').items(number_of_tweets):
    #     print(tweet.full_text)
    #     if hasattr(tweet, 'in_reply_to_status_id_str'):
    #         print(tweet.in_reply_to_status_id_str, '    ', tweet.id_str)
    #         print('---------------------------------')
    #         if (tweet.in_reply_to_status_id_str == tweet.id_str):
    #             all_tweets_replies.append(tweet)
    # print(all_tweets_replies)
